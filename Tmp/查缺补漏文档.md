T202410287992755
## 磁盘读写
磁盘读写驱动中，需要将虚拟地址转化成为物理地址，由于之前只操作内核空间的虚拟地址，所以直接减偏移量没有问题，但是syscall有时候传入用户空间，所以不能直接去减偏移量了。
目前计划
上策：根据页表项写一个物理内存虚拟内存转换函数
下策：在syscall前分配内核缓冲区（目前采用）

## 路径工具
目前的路径工具无法使用 . .. 以及相对路径的处理，所以要实现一下，在使用vfsm的时候可以路径，相对路径随意使用。在vfsm对接vfs的时候，需要保证路径都标准化处理。
上策：写出强大的路径处理函数
中策：可能用栈处理
下策：针对样例特判（目前采用）

## 文件系统中特殊文件管理混乱
目前文件系统是FAT32系统，特殊文件理论上都应该是.开头的，但是为了支持pipe文件，pipe直接继承了fat32file类型，为了区分二者，也让其类型变为special,导致读文件读到special就会使用pipe的read。
上策：重构文件系统，让fat32file和pipefile均继承file类型，让现在使用到fat32file的地方均变成file接口。
下策：特判一下，主要是在read_fo中特判

## 进程调度中自动销毁子进程设计
在线程的调度中，盲目的跟随前人设计父进程自动销毁子进程，导致自动销毁处于不可用的代码状态。

## pipe文件没有销毁机制
需要设计一下


## elf解析头跳过了GNU_STACK 等


dlstart.c musl的入口函数

.quad (0x80000ull<<10)|0xFF//0xfffffffec0000000~0xfffffffeffffffff映射到0x00000000~0xffffffff

	la t0,boot_page_table_sv39_t1
	srli t0,t0,2
	ori t0,t0,0x1
	la t1,boot_page_table_sv39
	addi t1,t1,2016
	addi t1,t1,2040
	sw t0,0(t1)

	
	la t0,boot_page_table_sv39_t2
	srli t0,t0,2
	ori t0,t0,0x1
	la t1,boot_page_table_sv39_t1
	sw t0,8(t1)
	
	la t0,boot_page_table_sv39_t3
	//li t0,0x80200000
	srli t0,t0,2
	ori t0,t0,0xf
	la t1,boot_page_table_sv39_t2
	sw t0,0(t1)

